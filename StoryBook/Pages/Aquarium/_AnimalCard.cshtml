@model StoryBook.Models.AquariumAnimal

@* 
    æ°´æ—é¤¨å‹•ç‰©å¡ç‰‡ Partial View
    ç”¨é€”ï¼šé¡¯ç¤ºå–®ä¸€æ°´æ—é¤¨å‹•ç‰©çš„è©³ç´°ä»‹ç´¹
    ç‰ˆé¢è¨­è¨ˆï¼šæ¯é æ–‡å­—å…§å®¹æ§åˆ¶åœ¨ 200 å­—ä»¥å…§ï¼Œé©åˆå­©ç«¥é–±è®€
*@

<div class="aquarium-animal-card" data-animal-id="@Model.Id">
    <!-- å‹•ç‰©åœ–ç‰‡å€ -->
    <div class="animal-image-container">
        <img src="@Model.Images.Main" 
             alt="@Model.Name.Zh" 
             class="animal-image"
             onerror="this.onerror=null; this.src='/images/placeholder.svg';"
             loading="lazy" />
    </div>

    <!-- å‹•ç‰©è³‡è¨Šå€ -->
    <div class="animal-info">
        <!-- å‹•ç‰©åç¨± -->
        <h2 class="animal-name" data-lang-zh="@Model.Name.Zh" data-lang-en="@Model.Name.En">
            @Model.Name.Zh
        </h2>
        <p class="animal-name-en">@Model.Name.En</p>

        <!-- å±¬æ€§æ¨™ç±¤å€ -->
        <div class="animal-attributes">
            <!-- ç”Ÿæ´»å€åŸŸåˆ†é¡æ¨™ç±¤ -->
            @{
                var zoneName = Model.HabitatZone.GetDisplayName();
                var zoneCss = Model.HabitatZone.GetCssClass();
            }
            <span class="animal-attribute @zoneCss" title="ç”Ÿæ´»å€åŸŸ">
                <span class="attribute-icon">ğŸŒŠ</span>
                <span data-lang-zh="@zoneName.Zh" data-lang-en="@zoneName.En">
                    @zoneName.Zh
                </span>
            </span>

            <!-- é£Ÿæ€§æ¨™ç±¤ -->
            @{
                var dietLower = Model.Diet.En.ToLowerInvariant();
                var isCarnivore = dietLower.Contains("carnivore");
                var isOmnivore = dietLower.Contains("omnivore");
                var dietClass = isCarnivore ? "attribute-diet carnivore" : "attribute-diet";
                var dietIcon = isCarnivore ? "ğŸ–" : (isOmnivore ? "ğŸ½ï¸" : "ğŸŒ¿");
            }
            <span class="animal-attribute @dietClass" title="é£Ÿæ€§">
                <span class="attribute-icon">@dietIcon</span>
                <span data-lang-zh="@Model.Diet.Zh" data-lang-en="@Model.Diet.En">
                    @Model.Diet.Zh
                </span>
            </span>

            <!-- åˆ†ä½ˆåœ°é»æ¨™ç±¤ -->
            <span class="animal-attribute attribute-location" title="ç™¼ç¾åœ°é»">
                <span class="attribute-icon">ğŸ“</span>
                <span data-lang-zh="@Model.Location.Zh" data-lang-en="@Model.Location.En">
                    @Model.Location.Zh
                </span>
            </span>
        </div>

        <!-- ç”Ÿæ´»ç’°å¢ƒæè¿° -->
        <div class="animal-detail-section">
            <p class="animal-habitat">
                <strong>
                    <span class="detail-icon">ğŸ </span>
                    <span data-lang-zh="ç”Ÿæ´»ç’°å¢ƒ" data-lang-en="Habitat">ç”Ÿæ´»ç’°å¢ƒ</span>ï¼š
                </strong>
                <span data-lang-zh="@Model.Habitat.Zh" data-lang-en="@Model.Habitat.En">
                    @Model.Habitat.Zh
                </span>
            </p>

            <!-- é«”å‹æè¿°ï¼ˆé¸å¡«ï¼‰ -->
            @if (Model.Size is not null)
            {
                <p class="animal-size">
                    <strong>
                        <span class="detail-icon">ğŸ“</span>
                        <span data-lang-zh="é«”å‹" data-lang-en="Size">é«”å‹</span>ï¼š
                    </strong>
                    <span data-lang-zh="@Model.Size.Zh" data-lang-en="@Model.Size.En">
                        @Model.Size.Zh
                    </span>
                </p>
            }
        </div>

        <!-- å‹•ç‰©ä»‹ç´¹æ–‡å­—ï¼ˆæ§åˆ¶åœ¨ 200 å­—ä»¥å…§ï¼‰ -->
        <div class="animal-description" data-lang-zh="@Model.Description.Zh" data-lang-en="@Model.Description.En">
            @Model.Description.Zh
        </div>

        <!-- å‹•ç‰©å°æ•…äº‹å€å¡Šï¼ˆé¸å¡«ï¼‰ -->
        @if (Model.Story is not null)
        {
            <div class="animal-story-section">
                <h3 class="story-title">
                    <span class="story-icon">ğŸ“–</span>
                    <span data-lang-zh="å°æ•…äº‹" data-lang-en="Story Time">å°æ•…äº‹</span>
                </h3>
                
                <div class="story-content-wrapper">
                    <!-- æ•…äº‹æ’åœ–ï¼ˆå¦‚æœæœ‰ï¼‰ -->
                    @if (Model.Images.Story is not null && Model.Images.Story.Count > 0)
                    {
                        <div class="story-illustration">
                            <img src="@Model.Images.Story[0]" 
                                 alt="@Model.Name.Zh çš„å°æ•…äº‹æ’åœ–"
                                 class="story-image"
                                 onerror="this.onerror=null; this.src='/images/placeholder.svg';"
                                 loading="lazy" />
                        </div>
                    }
                    
                    <!-- æ•…äº‹æ–‡å­— -->
                    <div class="story-content" data-lang-zh="@Model.Story.Zh" data-lang-en="@Model.Story.En">
                        @Model.Story.Zh
                    </div>
                </div>
            </div>
        }
    </div>
</div>
